@model Veritabani_Odevi.Models.ViewModels.GirisKayitViewModel

@{
    ViewData["Title"] = "Giriş Yap / Kayıt Ol";
}

<style>
    /* Ana Konteyner: Formu sayfanın geri kalanından ayırır ve ortalar */
    .login-signup-container {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 4rem 0;
        min-height: 80vh;
        width: 100%;
    }

    .wrapper {
        position: relative;
        background: #fff;
        border-radius: 20px;
        box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        width: 850px;
        max-width: 100%;
        min-height: 600px;
        display: flex;
        overflow: hidden;
    }

    .form-container {
        width: 50%;
        padding: 40px;
        z-index: 1;
        transition: all 0.6s ease-in-out;
    }

    .login, .signup {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        width: 50%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        transition: all 0.6s ease-in-out;
    }

    .login {
        left: 0;
        z-index: 2;
        opacity: 1;
    }

    .signup {
        left: 0;
        opacity: 0;
        z-index: 1;
    }

    .wrapper.active {
        pointer-events: none;
    }

    .wrapper:not(.active) {
        pointer-events: auto;
    }

    .wrapper.active .login {
        transform: translateX(100%);
        opacity: 0;
        z-index: 1;
    }

    .wrapper.active .signup {
        transform: translateX(100%);
        opacity: 1;
        z-index: 2;
    }

    .form-container h2 {
        margin-bottom: 20px;
        color: #333;
    }

    .form-container form {
        display: flex;
        flex-direction: column;
        width: 100%;
    }

    .form-group {
        margin-bottom: 5px;
    }

    .form-container input {
        width: 100%;
        padding: 10px 15px;
        margin: 5px 0;
        border: 1px solid #ccc;
        border-radius: 10px;
        color: #333;
        background-color: #f0f0f0;
    }

        .form-container input:focus {
            border: 2px solid #2a5298;
            outline: none;
        }

    .form-container button.submit-btn {
        margin-top: 15px;
        padding: 12px;
        border: none;
        background: linear-gradient(to right, #1e3c72, #2a5298);
        color: white;
        font-weight: bold;
        border-radius: 10px;
        cursor: pointer;
        transition: background 0.3s ease;
    }

        .form-container button.submit-btn:hover {
            background: linear-gradient(to left, #1e3c72, #2a5298);
        }

    .toggle-container {
        width: 50%;
        background: linear-gradient(to bottom right, #1e3c72, #2a5298);
        color: white;
        position: absolute;
        top: 0;
        left: 50%;
        height: 100%;
        z-index: 10;
        transform: translateX(0);
        transition: all 0.6s ease-in-out;
    }

    .wrapper.active .toggle-container {
        transform: translateX(-100%);
    }

    .toggle-panel {
        position: absolute;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
        padding: 0 40px;
        text-align: center;
        top: 0;
        transition: all 0.6s ease-in-out;
    }

    .toggle-left {
        transform: translateX(-200%);
    }

    .toggle-right {
        transform: translateX(0);
    }

    .wrapper.active .toggle-left {
        transform: translateX(0);
    }

    .wrapper.active .toggle-right {
        transform: translateX(200%);
    }

    .toggle-container h2 {
        margin-bottom: 20px;
    }

    .toggle-container p {
        margin-bottom: 20px;
    }

    .toggle-container button.switch-btn {
        padding: 8px 25px;
        background: transparent;
        border: 2px solid white;
        color: white;
        border-radius: 10px;
        font-weight: bold;
        cursor: pointer;
        transition: background 0.3s ease;
    }

        .toggle-container button.switch-btn:hover {
            background: rgba(255,255,255,0.2);
        }

    .forgot-password {
        color: #2a5298;
        margin-top: 8px;
        font-size: 0.9rem;
        cursor: pointer;
        text-decoration: none;
    }

        .forgot-password:hover {
            text-decoration: underline;
        }

    .text-danger {
        color: #e74c3c;
        font-size: 0.8em;
        text-align: left;
        display: block;
        margin-left: 5px;
    }

    .form-row {
        display: flex;
        gap: 10px;
    }

        .form-row .form-group {
            flex: 1;
        }

    .checkbox {
        display: flex;
        align-items: center;
        margin: 20px 0;
        gap: 8px;
    }

        .checkbox input[type="checkbox"] {
            margin: 0;
            width: 16px;
            height: 16px;
            accent-color: #3B82F6;
        }

        .checkbox label {
            margin: 0;
            cursor: pointer;
            user-select: none;
            color: #D1D5DB;
            font-size: 0.9rem;
        }
</style>

<div class="login-signup-container">
    <div class="wrapper @(Model.AktifSekme == "Kayit" ? "active" : "")" id="formWrapper">

        <!-- Giriş Formu -->
        <div class="form-container login">
            @await Html.PartialAsync("_GirisPartial.cshtml", Model.Giris)
        </div>

        <!-- Kayıt Formu -->
        <div class="form-container signup">
            @await Html.PartialAsync("_KayitPartial.cshtml", Model.Kayit)
        </div>

        <!-- Toggle Panel -->
        <div class="toggle-container">
            <div class="toggle">
                <div class="toggle-panel toggle-left">
                    <h2>Tekrar Hoş Geldin!</h2>
                    <p>Kaldığın yerden devam etmek için giriş yap.</p>
                    <button class="switch-btn" id="loginBtn">Giriş Yap</button>
                </div>
                <div class="toggle-panel toggle-right">
                    <h2>Merhaba!</h2>
                    <p>Hesabın yok mu? Hemen aramıza katıl.</p>
                    <button class="switch-btn" id="registerBtn">Kayıt Ol</button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const wrapper = document.getElementById('formWrapper');
            const registerBtn = document.getElementById('registerBtn');
            const loginBtn = document.getElementById('loginBtn');

            const TRANSITION_DURATION = 600;

            registerBtn.addEventListener('click', e => {
                e.preventDefault();
                wrapper.style.pointerEvents = 'none';
                wrapper.classList.add('active');
                setTimeout(() => wrapper.style.pointerEvents = 'auto', TRANSITION_DURATION);
            });

            loginBtn.addEventListener('click', e => {
                e.preventDefault();
                wrapper.style.pointerEvents = 'none';
                wrapper.classList.remove('active');
                setTimeout(() => wrapper.style.pointerEvents = 'auto', TRANSITION_DURATION);
            });
        });
    </script>
}